{
  "dashboard":{
     "refresh":"10s",
     "revision":1,
     "schemaVersion":38,
     "style":"dark",
     "tags":[
      "DATASOURCE_UID"
     ],
     "time":{
        "from":"now-20m",
        "to":"now"
     },
     "timepicker":{
        
     },
     "timezone":"",
     "title":"IoT Device Dashboard",
     "weekStart":"",
     "editable":true,
     "fiscalYearStartMonth":0,
     "graphTooltip":0,
     "links":[
        
     ],
     "liveNow":false,
     "annotations":{
        "list":[
           {
              "builtIn":1,
              "datasource":{
                 "type":"datasource",
                 "uid":"grafana"
              },
              "enable":true,
              "hide":true,
              "iconColor":"rgba(0, 211, 255, 1)",
              "name":"Annotations & Alerts",
              "target":{
                 "limit":100,
                 "matchAny":false,
                 "tags":[
                    
                 ],
                 "type":"dashboard"
              },
              "type":"dashboard"
           }
        ]
     },
     "panels":[
        {
           "datasource":{
              "type":"grafana-timestream-datasource",
              "uid":"DATASOURCE_UID"
           },
           "fieldConfig":{
              "defaults":{
                 "color":{
                    "mode":"thresholds"
                 },
                 "custom":{
                    "axisCenteredZero":false,
                    "axisColorMode":"text",
                    "axisLabel":"",
                    "axisPlacement":"auto",
                    "fillOpacity":80,
                    "gradientMode":"none",
                    "hideFrom":{
                       "legend":false,
                       "tooltip":false,
                       "viz":false
                    },
                    "lineWidth":1,
                    "scaleDistribution":{
                       "type":"linear"
                    },
                    "thresholdsStyle":{
                       "mode":"off"
                    }
                 },
                 "links":[
                    {
                       "targetBlank":true,
                       "title":"look",
                       "url":"device=${__data.fields.Device}"
                    }
                 ],
                 "mappings":[
                    
                 ],
                 "thresholds":{
                    "mode":"absolute",
                    "steps":[
                       {
                          "color":"red",
                          "value":null
                       },
                       {
                          "color":"#EAB839",
                          "value":3
                       },
                       {
                          "color":"green",
                          "value":6
                       }
                    ]
                 }
              },
              "overrides":[
                 
              ]
           },
           "gridPos":{
              "h":8,
              "w":12,
              "x":0,
              "y":0
           },
           "id":4,
           "links":[
              {
                 "targetBlank":true,
                 "title":"drill down",
                 "url":"${deviceid:queryparam}"
              }
           ],
           "options":{
              "barRadius":0,
              "barWidth":0.97,
              "fullHighlight":false,
              "groupWidth":0.7,
              "legend":{
                 "calcs":[
                    
                 ],
                 "displayMode":"list",
                 "placement":"bottom",
                 "showLegend":true
              },
              "orientation":"auto",
              "showValue":"auto",
              "stacking":"none",
              "tooltip":{
                 "mode":"multi",
                 "sort":"none"
              },
              "xTickLabelRotation":0,
              "xTickLabelSpacing":0
           },
           "pluginVersion":"9.4.7",
           "targets":[
              {
                 "database":"\"IOT_TELEMETRY_DATABASE\"",
                 "datasource":{
                    "type":"grafana-timestream-datasource",
                    "uid":"DATASOURCE_UID"
                 },
                 "measure":"telemetry",
                 "rawQuery":"SELECT deviceid as Device, \n  round(avg(battery_level),2) as Battery, \n  round(avg(fuel_level),2) as Fuel,\n  max(time) as time\nFROM \"IOT_TELEMETRY_DATABASE\".\"device-telemetry\" \nWHERE time between ago(15d) and now() \ngroup by deviceid\nORDER BY time DESC \nLIMIT 100 ",
                 "refId":"A",
                 "table":"\"device-telemetry\""
              }
           ],
           "title":"Battery Performance",
           "type":"barchart"
        },
        {
           "datasource":{
              "type":"grafana-timestream-datasource",
              "uid":"DATASOURCE_UID"
           },
           "fieldConfig":{
              "defaults":{
                 "color":{
                    "mode":"thresholds"
                 },
                 "mappings":[
                    
                 ],
                 "max":100,
                 "min":0,
                 "thresholds":{
                    "mode":"absolute",
                    "steps":[
                       {
                          "color":"green",
                          "value":null
                       },
                       {
                          "color":"#EAB839",
                          "value":800
                       },
                       {
                          "color":"red",
                          "value":900
                       }
                    ]
                 }
              },
              "overrides":[
                 
              ]
           },
           "gridPos":{
              "h":8,
              "w":6,
              "x":12,
              "y":0
           },
           "id":8,
           "options":{
              "orientation":"auto",
              "reduceOptions":{
                 "calcs":[
                    "lastNotNull"
                 ],
                 "fields":"",
                 "values":false
              },
              "showThresholdLabels":false,
              "showThresholdMarkers":true
           },
           "pluginVersion":"9.4.7",
           "targets":[
              {
                 "database":"\"IOT_TELEMETRY_DATABASE\"",
                 "datasource":{
                    "type":"grafana-timestream-datasource",
                    "uid":"DATASOURCE_UID"
                 },
                 "measure":"telemetry",
                 "rawQuery":"select battery_level as \"Voltage (Battery)\" from \"IOT_TELEMETRY_DATABASE\".\"device-telemetry\"",
                 "refId":"A",
                 "table":"\"device-telemetry\""
              }
           ],
           "title":"Voltage (Battery)",
           "type":"gauge"
        },
        {
           "datasource":{
              "type":"grafana-timestream-datasource",
              "uid":"DATASOURCE_UID"
           },
           "fieldConfig":{
              "defaults":{
                 "color":{
                    "mode":"thresholds"
                 },
                 "mappings":[
                    
                 ],
                 "max":200,
                 "min":0,
                 "thresholds":{
                    "mode":"absolute",
                    "steps":[
                       {
                          "color":"green",
                          "value":null
                       },
                       {
                          "color":"#EAB839",
                          "value":12400
                       },
                       {
                          "color":"red",
                          "value":12600
                       }
                    ]
                 }
              },
              "overrides":[
                 
              ]
           },
           "gridPos":{
              "h":8,
              "w":6,
              "x":18,
              "y":0
           },
           "id":10,
           "options":{
              "orientation":"auto",
              "reduceOptions":{
                 "calcs":[
                    "lastNotNull"
                 ],
                 "fields":"",
                 "values":false
              },
              "showThresholdLabels":false,
              "showThresholdMarkers":true
           },
           "pluginVersion":"9.4.7",
           "targets":[
              {
                 "database":"\"IOT_TELEMETRY_DATABASE\"",
                 "datasource":{
                    "type":"grafana-timestream-datasource",
                    "uid":"DATASOURCE_UID"
                 },
                 "measure":"telemetry",
                 "rawQuery":"select fuel_level as \"Fuel Level\" from \"IOT_TELEMETRY_DATABASE\".\"device-telemetry\"",
                 "refId":"A",
                 "table":"\"device-telemetry\""
              }
           ],
           "title":"Fuel Level",
           "type":"gauge"
        },
        {
           "datasource":{
              "type":"grafana-timestream-datasource",
              "uid":"DATASOURCE_UID"
           },
           "fieldConfig":{
              "defaults":{
                 "color":{
                    "mode":"thresholds"
                 },
                 "custom":{
                    "hideFrom":{
                       "legend":false,
                       "tooltip":false,
                       "viz":false
                    }
                 },
                 "mappings":[
                    
                 ],
                 "thresholds":{
                    "mode":"absolute",
                    "steps":[
                       {
                          "color":"red",
                          "value":null
                       },
                       {
                          "color":"yellow",
                          "value":2
                       },
                       {
                          "color":"green",
                          "value":4
                       }
                    ]
                 }
              },
              "overrides":[
                 
              ]
           },
           "gridPos":{
              "h":9,
              "w":12,
              "x":0,
              "y":8
           },
           "id":2,
           "options":{
              "basemap":{
                 "config":{
                    
                 },
                 "name":"Layer 0",
                 "type":"default"
              },
              "controls":{
                 "mouseWheelZoom":true,
                 "showAttribution":true,
                 "showDebug":false,
                 "showMeasure":false,
                 "showScale":false,
                 "showZoom":true
              },
              "layers":[
                 {
                    "config":{
                       "showLegend":true,
                       "style":{
                          "color":{
                             "field":"battery_level",
                             "fixed":"dark-green"
                          },
                          "opacity":0.4,
                          "rotation":{
                             "fixed":0,
                             "max":360,
                             "min":-360,
                             "mode":"mod"
                          },
                          "size":{
                             "fixed":5,
                             "max":15,
                             "min":2
                          },
                          "symbol":{
                             "fixed":"img/icons/marker/circle.svg",
                             "mode":"fixed"
                          },
                          "textConfig":{
                             "fontSize":12,
                             "offsetX":0,
                             "offsetY":0,
                             "textAlign":"center",
                             "textBaseline":"middle"
                          }
                       }
                    },
                    "filterData":{
                       "id":"byRefId",
                       "options":"A"
                    },
                    "location":{
                       "mode":"auto"
                    },
                    "name":"Battery",
                    "tooltip":true,
                    "type":"markers"
                 }
              ],
              "tooltip":{
                 "mode":"details"
              },
              "view":{
                 "allLayers":true,
                 "id":"north-america",
                 "lat":40,
                 "lon":-100,
                 "zoom":3
              }
           },
           "pluginVersion":"9.4.7",
           "targets":[
              {
                 "database":"\"IOT_TELEMETRY_DATABASE\"",
                 "datasource":{
                    "type":"grafana-timestream-datasource",
                    "uid":"DATASOURCE_UID"
                 },
                 "measure":"telemetry",
                 "rawQuery":"SELECT *, latitude as lat, longitude as lng \nFROM \"IOT_TELEMETRY_DATABASE\".\"device-telemetry\" \nWHERE time between ago(50d) and now() \nand deviceid = '$deviceid'\nORDER BY time \nDESC LIMIT 100",
                 "refId":"A",
                 "table":"\"device-telemetry\""
              }
           ],
           "title":"Device Location",
           "type":"geomap"
        },
        {
           "datasource":{
              "type":"grafana-timestream-datasource",
              "uid":"DATASOURCE_UID"
           },
           "fieldConfig":{
              "defaults":{
                 "color":{
                    "mode":"palette-classic"
                 },
                 "custom":{
                    "axisCenteredZero":false,
                    "axisColorMode":"text",
                    "axisLabel":"",
                    "axisPlacement":"auto",
                    "barAlignment":0,
                    "drawStyle":"line",
                    "fillOpacity":0,
                    "gradientMode":"none",
                    "hideFrom":{
                       "legend":false,
                       "tooltip":false,
                       "viz":false
                    },
                    "lineInterpolation":"smooth",
                    "lineStyle":{
                       "fill":"solid"
                    },
                    "lineWidth":2,
                    "pointSize":5,
                    "scaleDistribution":{
                       "type":"linear"
                    },
                    "showPoints":"always",
                    "spanNulls":true,
                    "stacking":{
                       "group":"A",
                       "mode":"none"
                    },
                    "thresholdsStyle":{
                       "mode":"off"
                    }
                 },
                 "mappings":[
                    
                 ],
                 "max":100,
                 "min":0,
                 "thresholds":{
                    "mode":"absolute",
                    "steps":[
                       {
                          "color":"green",
                          "value":null
                       }
                    ]
                 }
              },
              "overrides":[
                 
              ]
           },
           "gridPos":{
              "h":9,
              "w":12,
              "x":12,
              "y":8
           },
           "id":6,
           "options":{
              "legend":{
                 "calcs":[
                    
                 ],
                 "displayMode":"list",
                 "placement":"bottom",
                 "showLegend":true
              },
              "tooltip":{
                 "mode":"single",
                 "sort":"none"
              }
           },
           "targets":[
              {
                 "database":"\"IOT_TELEMETRY_DATABASE\"",
                 "datasource":{
                    "type":"grafana-timestream-datasource",
                    "uid":"DATASOURCE_UID"
                 },
                 "measure":"telemetry",
                 "rawQuery":"SELECT battery_level as \"Voltage(Battery)\", time \nFROM \"IOT_TELEMETRY_DATABASE\".\"device-telemetry\" \nWHERE time between ago(60d) and now() \nand deviceid = '$deviceid'\nORDER BY time",
                 "refId":"A",
                 "table":"\"device-telemetry\""
              }
           ],
           "title":"Battery Voltage for $deviceid",
           "type":"timeseries"
        }
     ],
     "templating":{
        "list":[
           {
              "current":{
                 "selected":false,
                 "text":"device5",
                 "value":"device5"
              },
              "datasource":{
                 "type":"grafana-timestream-datasource",
                 "uid":"DATASOURCE_UID"
              },
              "definition":"select distinct deviceid from \"IOT_TELEMETRY_DATABASE\".\"device-telemetry\"",
              "hide":0,
              "includeAll":false,
              "multi":false,
              "name":"deviceid",
              "options":[
                 
              ],
              "query":"select distinct deviceid from \"IOT_TELEMETRY_DATABASE\".\"device-telemetry\"",
              "refresh":1,
              "regex":"",
              "skipUrlSync":false,
              "sort":0,
              "type":"query"
           }
        ]
     }
  }
}